<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title id="page-title">Xalostore</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://i.imgur.com/oWyf5VR.png">
    <style>
        /* CSS-Variablen */
        :root {
            --bg-primary: var(--light-bg-primary);
            --bg-secondary: var(--light-bg-secondary);
            --text-primary: var(--light-text-primary);
            --text-secondary: var(--light-text-secondary);
            --card-bg: var(--light-card-bg);
            --install-btn-bg: var(--light-install-btn-bg);
            --install-btn-text: var(--light-install-btn-text);
            --card-shadow: rgba(0, 0, 0, 0.1);
            --header-bg: var(--light-header-bg);
            --tabbar-bg: var(--light-tabbar-bg);
            --tabbar-border: var(--light-tabbar-border);
            --tabbar-icon: var(--light-tabbar-icon);
            --tabbar-icon-active: var(--light-tabbar-icon-active);
            --modal-overlay: rgba(0, 0, 0, 0.7);
            --modal-bg: var(--light-modal-bg);
            --input-bg: var(--light-input-bg);
            --input-text: var(--light-input-text);
            --splash-bg: var(--light-splash-bg);
            --search-bar-bg: var(--light-search-bar-bg);
            --search-bar-text: var(--light-search-bar-text);
            --pwa-banner-bg: var(--light-pwa-banner-bg);

            --light-bg-primary: #ffffff;
            --light-bg-secondary: #f0f0f0;
            --light-text-primary: #000000;
            --light-text-secondary: #666666;
            --light-card-bg: #ffffff;
            --light-install-btn-bg: #007aff;
            --light-install-btn-text: #ffffff;
            --light-card-shadow: rgba(0, 0, 0, 0.1);
            --light-header-bg: #ffffff;
            --light-tabbar-bg: #ffffff;
            --light-tabbar-border: #e0e0e0;
            --light-tabbar-icon: #8e8e93;
            --light-tabbar-icon-active: #007aff;
            --light-modal-overlay: rgba(0, 0, 0, 0.7);
            --light-modal-bg: #ffffff;
            --light-input-bg: #e5e5e5;
            --light-input-text: #000000;
            --light-splash-bg: #ffffff;
            --light-search-bar-bg: #e5e5e5;
            --light-search-bar-text: #000000;
            --light-pwa-banner-bg: #f0f0f0;
        }
        .dark {
            --bg-primary: var(--dark-bg-primary);
            --bg-secondary: var(--dark-bg-secondary);
            --text-primary: var(--dark-text-primary);
            --text-secondary: var(--dark-text-secondary);
            --card-bg: var(--dark-card-bg);
            --install-btn-bg: var(--dark-install-btn-bg);
            --install-btn-text: var(--dark-install-btn-text);
            --card-shadow: rgba(0, 0, 0, 0.3);
            --header-bg: var(--dark-header-bg);
            --tabbar-bg: var(--dark-tabbar-bg);
            --tabbar-border: var(--dark-tabbar-border);
            --tabbar-icon: var(--dark-tabbar-icon);
            --tabbar-icon-active: var(--dark-tabbar-icon-active);
            --modal-overlay: rgba(0, 0, 0, 0.8);
            --modal-bg: var(--dark-modal-bg);
            --input-bg: var(--dark-input-bg);
            --input-text: var(--dark-input-text);
            --splash-bg: var(--dark-splash-bg);
            --search-bar-bg: var(--dark-search-bar-bg);
            --search-bar-text: var(--dark-search-bar-text);
            --pwa-banner-bg: var(--dark-pwa-banner-bg);

            --dark-bg-primary: #1c1c1e;
            --dark-bg-secondary: #2c2c2e;
            --dark-text-primary: #ffffff;
            --dark-text-secondary: #aaaaaa;
            --dark-card-bg: #2c2c2e;
            --dark-install-btn-bg: #0a84ff;
            --dark-install-btn-text: #ffffff;
            --dark-card-shadow: rgba(0, 0, 0, 0.3);
            --dark-header-bg: #1c1c1e;
            --dark-tabbar-bg: #1c1c1e;
            --dark-tabbar-border: #38383a;
            --dark-tabbar-icon: #8e8e93;
            --dark-tabbar-icon-active: #0a84ff;
            --dark-modal-bg: #2c2c2e;
            --dark-input-bg: #3a3a3c;
            --dark-input-text: #ffffff;
            --dark-splash-bg: #000000;
            --dark-search-bar-bg: #3a3a3c;
            --dark-search-bar-text: #ffffff;
            --dark-pwa-banner-bg: #3a3a3c;
        }

        /* Allgemeine Stile */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Mindesth√∂he, damit der Footer unten bleibt */
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: var(--bg-primary); /* Initialwert, wird von JS/Prefers-Color-Scheme gesetzt */
            color: var(--text-primary); /* Initialwert */
        }
        body.light {
            background-color: var(--light-bg-primary);
            color: var(--light-text-primary);
        }
        body.dark {
            background-color: var(--dark-bg-primary);
            color: var(--dark-text-primary);
        }

        .container {
            flex: 1; /* Nimmt den verbleibenden Platz ein */
            padding: 0 16px;
            padding-bottom: 70px; /* Platz f√ºr Tab-Bar */
            padding-top: env(safe-area-inset-top); /* F√ºr iPhone Notch */
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* Top Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 16px 0 16px;
            background-color: var(--header-bg);
            transition: background-color 0.3s;
        }
        .top-bar .title-block {
            display: flex;
            align-items: center;
        }
        .top-bar img {
            width: 40px;
            height: 40px;
            margin-right: 12px;
            border-radius: 10px;
        }
        .top-bar h1 {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
        }
        .top-bar h2 {
            font-size: 14px;
            font-weight: 400;
            margin: -5px 0 0 0;
            color: var(--text-secondary);
        }
        .top-bar .toggle-mode {
            font-size: 24px;
            cursor: pointer;
            color: var(--text-primary);
        }

        /* Tab Bar */
        .tab-bar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: var(--tabbar-bg);
            border-top: 1px solid var(--tabbar-border);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            padding-bottom: env(safe-area-inset-bottom);
            z-index: 1000;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            padding: 5px 0;
            cursor: pointer;
            color: var(--tabbar-icon);
            font-size: 12px;
            transition: color 0.3s;
        }

        .tab-item.active {
            color: var(--tabbar-icon-active);
        }

        .tab-item i {
            font-size: 24px;
            margin-bottom: 2px;
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding-top: 20px;
        }
        .content-section.active {
            display: block;
        }

        /* Explore Section */
        .section-title {
            font-size: 28px;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .featured-apps-container {
            display: flex;
            overflow-x: scroll;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 15px; /* Platz f√ºr Scrollbar */
            scroll-snap-type: x mandatory;
            gap: 15px; /* Abstand zwischen Featured Cards */
        }

        .featured-app-card {
            flex: 0 0 90%; /* Nimmt 90% der Breite ein */
            max-width: 400px; /* Maximale Breite f√ºr gr√∂√üere Bildschirme */
            scroll-snap-align: start;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--card-shadow);
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 220px; /* Mindesth√∂he f√ºr konsistentes Layout */
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .featured-app-card img {
            width: 90px;
            height: 90px;
            border-radius: 20px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .featured-app-card h3 {
            font-size: 20px;
            font-weight: 600;
            margin: 0 0 5px 0;
            color: var(--text-primary);
        }

        .featured-app-card p {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0 0 15px 0;
            flex-grow: 1; /* L√§sst den Text Platz einnehmen */
        }

        .featured-app-card .install-btn {
            background-color: var(--install-btn-bg);
            color: var(--install-btn-text);
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
            transition: transform 0.2s ease-in-out, background-color 0.3s;
        }
        .featured-app-card .install-btn:active {
            transform: scale(0.95);
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .app-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--card-shadow);
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, background-color 0.3s, box-shadow 0.3s;
        }
        .app-card:active {
            transform: scale(0.98);
        }

        .app-card img {
            width: 80px;
            height: 80px;
            border-radius: 18px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .app-card h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 5px 0;
            color: var(--text-primary);
        }

        .app-card p {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 0 0 10px 0;
            flex-grow: 1; /* L√§sst den Text Platz einnehmen */
        }

        .app-card .install-btn {
            background-color: var(--install-btn-bg);
            color: var(--install-btn-text);
            padding: 8px 15px;
            border-radius: 15px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            transition: transform 0.2s ease-in-out, background-color 0.3s;
        }
        .app-card .install-btn:active {
            transform: scale(0.95);
        }

        /* Search Section */
        .search-bar {
            width: 100%;
            padding: 12px 15px;
            background-color: var(--search-bar-bg);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            color: var(--search-bar-text);
            outline: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .search-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        .search-prompt, .no-results {
            text-align: center;
            color: var(--text-secondary);
            margin-top: 50px;
            font-size: 16px;
        }

        /* Profile Section */
        .profile-content {
            text-align: center;
            padding-top: 50px;
        }
        .profile-content h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        .profile-content p {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        .settings-section {
            margin-top: 40px;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: left;
            box-shadow: 0 5px 15px var(--card-shadow);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        .settings-section h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
            text-align: center;
        }
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--tabbar-border);
            color: var(--text-primary);
        }
        .setting-item:last-child {
            border-bottom: none;
        }
        .setting-item label {
            font-size: 16px;
        }
        .setting-item select, .setting-item .toggle-switch {
            cursor: pointer;
        }
        .setting-item select {
            background-color: var(--input-bg);
            color: var(--input-text);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 15px;
            appearance: none; /* Entfernt Standard-Pfeil */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%238e8e93" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 24px;
        }
        .dark .setting-item select { /* Spezifisch f√ºr Dark Mode, falls SVG-Farbe angepasst werden muss */
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23aaaaaa" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
        }

        /* Toggle Switch (f√ºr Dark Mode) */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--install-btn-bg);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--install-btn-bg);
        }
        input:checked + .slider:before {
            -webkit-transform: translateX(20px);
            -ms-transform: translateX(20px);
            transform: translateX(20px);
        }

        /* Modal / Detail View */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--modal-overlay);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--modal-bg);
            border-radius: 15px;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            text-align: center;
            transform: translateY(20px);
            transition: transform 0.3s ease-in-out, background-color 0.3s;
        }
        .modal-overlay.visible .modal-content {
            transform: translateY(0);
        }

        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-icon {
            width: 100px;
            height: 100px;
            border-radius: 22px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .modal-app-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .modal-app-subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .modal-description {
            font-size: 15px;
            color: var(--text-primary);
            margin-bottom: 20px;
            max-height: 150px; /* Max H√∂he, kann scrollbar werden */
            overflow-y: auto;
            text-align: left;
            line-height: 1.4;
        }

        .modal-details {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        .modal-details div strong {
            display: block;
            color: var(--text-primary);
            font-size: 16px;
        }

        .modal-install-btn {
            background-color: var(--install-btn-bg);
            color: var(--install-btn-text);
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-size: 18px;
            font-weight: 600;
            white-space: nowrap;
            display: inline-block;
            transition: transform 0.2s ease-in-out, background-color 0.3s;
        }
        .modal-install-btn:active {
            transform: scale(0.95);
        }

        /* PWA Installation Banner */
        .pwa-banner {
            display: none; /* Initial hidden */
            position: fixed;
            bottom: 70px; /* √úber der Tab-Bar */
            left: 10px;
            right: 10px;
            background-color: var(--pwa-banner-bg);
            color: var(--text-primary);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            z-index: 999;
            animation: fadeIn 0.5s ease-out;
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }
        .pwa-banner.show {
            display: block;
        }
        .pwa-banner .tip-heading {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 5px;
        }
        .pwa-banner .tip-text {
            font-size: 14px;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        .pwa-banner button {
            background-color: var(--install-btn-bg);
            color: var(--install-btn-text);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, background-color 0.3s;
        }
        .pwa-banner button:active {
            transform: scale(0.95);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Media Query f√ºr Dark Mode */
        @media (prefers-color-scheme: dark) {
            body:not(.light) {
                background-color: var(--dark-bg-primary);
                color: var(--dark-text-primary);

                --bg-primary: var(--dark-bg-primary);
                --bg-secondary: var(--dark-bg-secondary);
                --text-primary: var(--dark-text-primary);
                --text-secondary: var(--dark-text-secondary);
                --card-bg: var(--dark-card-bg);
                --install-btn-bg: var(--dark-install-btn-bg);
                --install-btn-text: var(--dark-install-btn-text);
                --card-shadow: var(--dark-card-shadow);
                --header-bg: var(--dark-header-bg);
                --tabbar-bg: var(--dark-tabbar-bg);
                --tabbar-border: var(--dark-tabbar-border);
                --tabbar-icon: var(--dark-tabbar-icon);
                --tabbar-icon-active: var(--dark-tabbar-icon-active);
                --modal-overlay: var(--dark-modal-overlay);
                --modal-bg: var(--dark-modal-bg);
                --input-bg: var(--dark-input-bg);
                --input-text: var(--dark-input-text);
                --splash-bg: var(--dark-splash-bg);
                --search-bar-bg: var(--dark-search-bar-bg);
                --search-bar-text: var(--dark-search-bar-text);
                --pwa-banner-bg: var(--dark-pwa-banner-bg);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta8gBexs4prT2AXK2sL/c9oRjTzCq0K4M4T8P9903x7sK4Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="light">

    <div class="top-bar">
        <div class="title-block">
            <img src="https://i.imgur.com/oWyf5VR.png" alt="Xalostore Logo">
            <div>
                <h1 id="header-title">Xalostore</h1>
                <h2 id="header-subtitle">Sideload Apps. Simple. Secure.</h2>
            </div>
        </div>
        <div class="toggle-mode" onclick="toggleMode()">üåô</div>
    </div>

    <div class="container">
        <section id="explore-section" class="content-section active">
            <h2 id="explore-section-title" class="section-title">Explore</h2>
            <div class="featured-apps-container" id="featured-apps-container">
                </div>
            <h2 id="all-apps-section-title" class="section-title">All Apps</h2>
            <div class="app-grid" id="all-apps-grid">
                </div>
        </section>

        <section id="search-section" class="content-section">
            <h2 id="search-section-title" class="section-title">Suchen</h2>
            <input type="text" id="search-input" class="search-bar" placeholder="App suchen...">
            <div id="search-results" class="search-results">
                <p id="search-prompt" class="search-prompt">Beginne mit der Suche, um Apps zu finden.</p>
                </div>
        </section>

        <section id="profile-section" class="content-section">
            <div class="profile-content">
                <h1 id="profile-welcome-title">Willkommen bei Xalostore!</h1>
                <p id="profile-text-1">Dies ist dein einfacher und sicherer Ort, um Sideload-Apps zu finden und zu installieren.</p>
                <p id="profile-text-2">Wir arbeiten st√§ndig daran, dir neue Funktionen und die besten Apps zur Verf√ºgung zu stellen.</p>
                <p id="profile-text-3">Schau bald wieder vorbei f√ºr Updates und neue Inhalte!</p>
            </div>

            <div class="settings-section">
                <h3 id="settings-title">Einstellungen</h3>
                <div class="setting-item">
                    <label for="language-select" id="language-setting-label">Sprache</label>
                    <select id="language-select">
                        <option value="de">Deutsch</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label id="darkModeSettingLabel">Dark Mode</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
        </section>
    </div>

    <div id="pwa-banner" class="pwa-banner">
        <div class="tip-heading" id="pwa-banner-tip"></div>
        <div class="tip-text" id="pwa-banner-text"></div>
        <button id="pwa-banner-button"></button>
    </div>

    <div id="app-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close-btn" onclick="closeModal()">&times;</span>
            <img id="modal-app-icon" class="modal-icon" src="" alt="App Icon">
            <h2 id="modal-app-name" class="modal-app-name"></h2>
            <p id="modal-app-subtitle" class="modal-app-subtitle"></p>
            <p id="modal-description" class="modal-description"></p>
            <div class="modal-details">
                <div>
                    <span id="modal-version-label">Version:</span> <strong id="modal-version"></strong>
                </div>
                <div>
                    <span id="modal-size-label">Gr√∂√üe:</span> <strong id="modal-size"></strong>
                </div>
            </div>
            <a id="modal-install-btn" class="modal-install-btn" href="#" download>Installieren</a>
        </div>
    </div>

    <div class="tab-bar">
        <div id="explore-tab" class="tab-item active" onclick="showSection('explore')">
            <i class="fas fa-compass"></i>
            <span id="explore-tab-text">Explore</span>
        </div>
        <div id="search-tab" class="tab-item" onclick="showSection('search')">
            <i class="fas fa-search"></i>
            <span id="search-tab-text">Suchen</span>
        </div>
        <div id="profile-tab" class="tab-item" onclick="showSection('profile')">
            <i class="fas fa-user"></i>
            <span id="profile-tab-text">Profil</span>
        </div>
    </div>

    <script>
        // Sprach- und √úbersetzungslogik
        const translations = {
            "de": {
                "title": "Xalostore",
                "subtitle": "Sideload Apps. Simple. Secure.",
                "searchPlaceholder": "App suchen...",
                "searchPrompt": "Beginne mit der Suche, um Apps zu finden.",
                "noAppsFound": "Keine Apps gefunden.",
                "exploreTab": "Explore",
                "searchTab": "Suchen",
                "profileTab": "Profil",
                "appsLoadError": "Fehler beim Laden der Apps. Bitte versuche es sp√§ter erneut.",
                "installButton": "Installieren",
                "modalDefaultDescription": "Keine Beschreibung verf√ºgbar.",
                "modalVersion": "Version:",
                "modalSize": "Gr√∂√üe:",
                "modalInstallButton": "Installieren",
                "pwaBannerTip": "üì≤ Tipp:",
                "pwaBannerText": "Du kannst <strong>Xalostore</strong> wie eine echte App nutzen!<br>Tippe unten auf das <strong>Teilen-Symbol</strong> und w√§hle <em>\"Zum Home-Bildschirm hinzuf√ºgen\"</em>.",
                "pwaBannerButton": "Nicht mehr anzeigen",
                "profileWelcomeTitle": "Willkommen bei Xalostore!",
                "profileText1": "Dies ist dein einfacher und sicherer Ort, um Sideload-Apps zu finden und zu installieren.",
                "profileText2": "Wir arbeiten st√§ndig daran, dir neue Funktionen und die besten Apps zur Verf√ºgung zu stellen.",
                "profileText3": "Schau bald wieder vorbei f√ºr Updates und neue Inhalte!",
                "settingsTitle": "Einstellungen",
                "languageSettingLabel": "Sprache",
                "darkModeSettingLabel": "Dark Mode",
                "languageSelectionTitle": "Sprache w√§hlen",
                "languageDe": "Deutsch",
                "languageEn": "English",
                "toggleModeButtonDark": "‚òÄÔ∏è",
                "toggleModeButtonLight": "üåô",
                "downloadPageTitle": "App herunterladen - Xalostore", // NEU HINZUGEF√úGT
                "ipaDownloadButton": "IPA herunterladen", // NEU HINZUGEF√úGT
                "loadingMessage": "Deine App wird vorbereitet, bitte warten..." // NEU HINZUGEF√úGT
            },
            "en": {
                "title": "Xalostore",
                "subtitle": "Sideload Apps. Simple. Secure.",
                "searchPlaceholder": "Search for an app...",
                "searchPrompt": "Start searching to find apps.",
                "noAppsFound": "No apps found.",
                "exploreTab": "Explore",
                "searchTab": "Search",
                "profileTab": "Profile",
                "appsLoadError": "Error loading apps. Please try again later.",
                "installButton": "Install",
                "modalDefaultDescription": "No description available.",
                "modalVersion": "Version:",
                "modalSize": "Size:",
                "modalInstallButton": "Install",
                "pwaBannerTip": "üì≤ Tip:",
                "pwaBannerText": "You can use <strong>Xalostore</strong> like a real app!<br>Tap the <strong>Share icon</strong> at the bottom and select <em>\"Add to Home Screen\"</em>.",
                "pwaBannerButton": "Don't show again",
                "profileWelcomeTitle": "Welcome to Xalostore!",
                "profileText1": "This is your simple and secure place to find and install sideload apps.",
                "profileText2": "We are constantly working to bring you new features and the best apps.",
                "profileText3": "Check back soon for updates and new content!",
                "settingsTitle": "Settings",
                "languageSettingLabel": "Language",
                "darkModeSettingLabel": "Dark Mode",
                "languageSelectionTitle": "Select Language",
                "languageDe": "Deutsch",
                "languageEn": "English",
                "toggleModeButtonDark": "‚òÄÔ∏è",
                "toggleModeButtonLight": "üåô",
                "downloadPageTitle": "Download App - Xalostore", // NEU HINZUGEF√úGT
                "ipaDownloadButton": "Download IPA", // NEU HINZUGEF√úGT
                "loadingMessage": "Your app is being prepared, please wait..." // NEU HINZUGEF√úGT
            }
        };

        let currentLanguage = localStorage.getItem('appLanguage') || 'de'; // Standard auf Deutsch
        let currentDarkModeState = localStorage.getItem('xalostore_dark_mode') === 'true'; // Dark Mode Zustand

        function getTranslation(key) {
            return translations[currentLanguage][key] || key;
        }

        function translatePage() {
            document.getElementById('page-title').textContent = getTranslation('title');
            document.getElementById('header-title').textContent = getTranslation('title');
            document.getElementById('header-subtitle').textContent = getTranslation('subtitle');
            document.getElementById('explore-section-title').textContent = getTranslation('exploreTab');
            document.getElementById('all-apps-section-title').textContent = "All Apps"; // Dieser Titel bleibt statisch, kann aber auch √ºbersetzt werden
            document.getElementById('search-section-title').textContent = getTranslation('searchTab');
            document.getElementById('search-input').placeholder = getTranslation('searchPlaceholder');
            document.getElementById('search-prompt').textContent = getTranslation('searchPrompt');
            document.getElementById('explore-tab-text').textContent = getTranslation('exploreTab');
            document.getElementById('search-tab-text').textContent = getTranslation('searchTab');
            document.getElementById('profile-tab-text').textContent = getTranslation('profileTab');
            document.getElementById('profile-welcome-title').textContent = getTranslation('profileWelcomeTitle');
            document.getElementById('profile-text-1').textContent = getTranslation('profileText1');
            document.getElementById('profile-text-2').textContent = getTranslation('profileText2');
            document.getElementById('profile-text-3').textContent = getTranslation('profileText3');
            document.getElementById('settings-title').textContent = getTranslation('settingsTitle');
            document.getElementById('language-setting-label').textContent = getTranslation('languageSettingLabel');
            document.getElementById('darkModeSettingLabel').textContent = getTranslation('darkModeSettingLabel');

            const toggleModeBtn = document.querySelector('.top-bar .toggle-mode');
            if (toggleModeBtn) {
                toggleModeBtn.innerHTML = currentDarkModeState ? getTranslation('toggleModeButtonDark') : getTranslation('toggleModeButtonLight');
            }

            // PWA Banner Texte
            document.getElementById('pwa-banner-tip').innerHTML = getTranslation('pwaBannerTip');
            document.getElementById('pwa-banner-text').innerHTML = getTranslation('pwaBannerText');
            document.getElementById('pwa-banner-button').textContent = getTranslation('pwaBannerButton');

            // Modal Texte
            document.getElementById('modal-version-label').textContent = getTranslation('modalVersion');
            document.getElementById('modal-size-label').textContent = getTranslation('modalSize');
            document.getElementById('modal-install-btn').textContent = getTranslation('modalInstallButton');

            // Aktualisiere Install-Buttons in allen Karten (optional, da sie bei Neuerstellung aktualisiert werden)
            document.querySelectorAll('.install-btn').forEach(btn => {
                btn.textContent = getTranslation('installButton');
            });
        }

        function applyDarkModeState() {
            if (currentDarkModeState) {
                document.body.classList.remove('light');
                document.body.classList.add('dark');
            } else {
                document.body.classList.remove('dark');
                document.body.classList.add('light');
            }
            const toggleModeBtn = document.querySelector('.top-bar .toggle-mode');
            if (toggleModeBtn) {
                toggleModeBtn.innerHTML = currentDarkModeState ? getTranslation('toggleModeButtonDark') : getTranslation('toggleModeButtonLight');
            }
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            if (darkModeToggle) {
                darkModeToggle.checked = currentDarkModeState;
            }
        }

        function toggleMode() {
            currentDarkModeState = !currentDarkModeState;
            localStorage.setItem('xalostore_dark_mode', currentDarkModeState);
            applyDarkModeState();
        }

        function loadPreferences() {
            const storedLanguage = localStorage.getItem('appLanguage');
            if (storedLanguage) {
                currentLanguage = storedLanguage;
            } else {
                const browserLang = navigator.language.split('-')[0];
                if (translations[browserLang]) {
                    currentLanguage = browserLang;
                } else {
                    currentLanguage = 'de'; // Fallback
                }
            }
            document.getElementById('language-select').value = currentLanguage;

            const storedDarkMode = localStorage.getItem('xalostore_dark_mode');
            if (storedDarkMode !== null) {
                currentDarkModeState = storedDarkMode === 'true';
            } else {
                // Initialer Dark Mode basierend auf Systemeinstellung
                currentDarkModeState = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            }
            applyDarkModeState();
            translatePage();
        }

        // Event Listener f√ºr Sprache √§ndern
        document.addEventListener('DOMContentLoaded', () => {
            loadPreferences();

            document.getElementById('language-select').addEventListener('change', (event) => {
                currentLanguage = event.target.value;
                localStorage.setItem('appLanguage', currentLanguage);
                translatePage();
                loadApps(); // Apps neu laden, um die Beschreibungen in der neuen Sprache zu erhalten
            });

            document.getElementById('dark-mode-toggle').addEventListener('change', toggleMode);

            // Listener f√ºr System Dark Mode √Ñnderungen
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                // Nur aktualisieren, wenn der Benutzer es nicht manuell √ºberschrieben hat
                if (localStorage.getItem('xalostore_dark_mode') === null) {
                    currentDarkModeState = event.matches;
                    applyDarkModeState();
                }
            });

            loadApps();
            showSection('explore'); // Standardm√§√üig Explore-Tab anzeigen
            setupSearch();
            showPwaBanner(); // PWA Banner anzeigen
        });

        // App Daten (Beispiel-Struktur)
        let allApps = []; // Wird von fetchApps gef√ºllt
        let featuredApps = []; // Wird von fetchApps gef√ºllt

        async function fetchApps() {
            try {
                // Ersetzen Sie 'apps.json' durch den tats√§chlichen Pfad zu Ihrer JSON-Datei
                const response = await fetch('apps.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                allApps = data.apps;
                featuredApps = data.featuredApps; // Angenommen, Ihre JSON hat einen 'featuredApps'-Array
                renderApps();
            } catch (error) {
                console.error("Fehler beim Laden der Apps:", error);
                document.getElementById('all-apps-grid').innerHTML = `<p style="text-align: center; color: var(--text-secondary);">${getTranslation('appsLoadError')}</p>`;
            }
        }

        function renderApps() {
            const allAppsGrid = document.getElementById('all-apps-grid');
            allAppsGrid.innerHTML = '';
            allApps.forEach(app => {
                allAppsGrid.appendChild(createCard(app));
            });

            const featuredAppsContainer = document.getElementById('featured-apps-container');
            featuredAppsContainer.innerHTML = '';
            featuredApps.forEach(app => {
                featuredAppsContainer.appendChild(createFeaturedCard(app));
            });
        }

        function createCard(app) {
            const card = document.createElement('div');
            card.classList.add('app-card');
            card.onclick = () => openModal(app); // √ñffnet Modal beim Klick auf die Karte

            card.innerHTML = `
                <img src="${app.iconURL}" alt="${app.name} Icon">
                <h3>${app.name}</h3>
                <p>${app.subtitle}</p>
                <a href="download_page.html?appName=${encodeURIComponent(app.name)}&appSubtitle=${encodeURIComponent(app.subtitle)}&appIconUrl=${encodeURIComponent(app.iconURL)}&ipaDownloadUrl=${encodeURIComponent(app.downloadURL)}" class="install-btn" onclick="event.stopPropagation()">${getTranslation('installButton')}</a>
            `;
            return card;
        }

        function createFeaturedCard(app) {
            const card = document.createElement('div');
            card.classList.add('featured-app-card');
            card.onclick = () => openModal(app); // √ñffnet Modal beim Klick auf die Karte

            card.innerHTML = `
                <img src="${app.iconURL}" alt="${app.name} Icon">
                <h3>${app.name}</h3>
                <p>${app.subtitle}</p>
                <a href="download_page.html?appName=${encodeURIComponent(app.name)}&appSubtitle=${encodeURIComponent(app.subtitle)}&appIconUrl=${encodeURIComponent(app.iconURL)}&ipaDownloadUrl=${encodeURIComponent(app.downloadURL)}" class="install-btn" onclick="event.stopPropagation()">${getTranslation('installButton')}</a>
            `;
            return card;
        }

        // Tab Switching Logic
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionId}-section`).classList.add('active');

            document.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.getElementById(`${sectionId}-tab`).classList.add('active');

            // Speichern des aktiven Tabs im localStorage
            localStorage.setItem('activeTab', sectionId);

            // Spezielle Logik f√ºr den Such-Tab
            if (sectionId === 'search') {
                const searchResultsDiv = document.getElementById('search-results');
                searchResultsDiv.innerHTML = `<p id="search-prompt" class="search-prompt">${getTranslation('searchPrompt')}</p>`;
                document.getElementById('search-input').value = ''; // Suchfeld leeren
            }
        }

        // Beim Laden der Seite den zuletzt aktiven Tab wiederherstellen
        window.addEventListener('load', () => {
            const lastActiveTab = localStorage.getItem('activeTab');
            if (lastActiveTab) {
                showSection(lastActiveTab);
            } else {
                showSection('explore'); // Standard, falls kein Tab gespeichert ist
            }
        });


        // Search Logic
        let searchTimeout;
        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            const searchResultsDiv = document.getElementById('search-results');

            searchInput.addEventListener('input', (event) => {
                clearTimeout(searchTimeout);
                const query = event.target.value.toLowerCase().trim();

                if (query.length === 0) {
                    searchResultsDiv.innerHTML = `<p id="search-prompt" class="search-prompt">${getTranslation('searchPrompt')}</p>`;
                    return;
                }

                searchTimeout = setTimeout(() => {
                    const filteredApps = allApps.filter(app =>
                        app.name.toLowerCase().includes(query) ||
                        app.subtitle.toLowerCase().includes(query) ||
                        (app.description && app.description.toLowerCase().includes(query))
                    );
                    renderSearchResults(filteredApps);
                }, 300); // Verz√∂gerung, um nicht bei jeder Eingabe zu suchen
            });
        }

        function renderSearchResults(results) {
            const searchResultsDiv = document.getElementById('search-results');
            searchResultsDiv.innerHTML = '';
            if (results.length === 0) {
                searchResultsDiv.innerHTML = `<p class="no-results">${getTranslation('noAppsFound')}</p>`;
            } else {
                results.forEach(app => {
                    searchResultsDiv.appendChild(createCard(app));
                });
            }
        }


        // Modal Logic
        function openModal(app) {
            const modalOverlay = document.getElementById('app-modal-overlay');
            document.getElementById('modal-app-icon').src = app.iconURL;
            document.getElementById('modal-app-name').textContent = app.name;
            document.getElementById('modal-app-subtitle').textContent = app.subtitle;
            document.getElementById('modal-description').textContent = app.description && app.description[currentLanguage] ? app.description[currentLanguage] : getTranslation('modalDefaultDescription'); // Beschreibungen sind jetzt sprachabh√§ngig
            document.getElementById('modal-version').textContent = app.version;
            document.getElementById('modal-size').textContent = app.size;

            // Wichtig: Der Install-Button im Modal muss auch auf die download_page.html verlinken
            const modalInstallBtn = document.getElementById('modal-install-btn');
            modalInstallBtn.href = `download_page.html?appName=${encodeURIComponent(app.name)}&appSubtitle=${encodeURIComponent(app.subtitle)}&appIconUrl=${encodeURIComponent(app.iconURL)}&ipaDownloadUrl=${encodeURIComponent(app.downloadURL)}`;
            modalInstallBtn.download = app.name + ".ipa"; // Setzt den Dateinamen f√ºr den Download

            modalOverlay.classList.add('visible');
            document.body.style.overflow = 'hidden'; // Verhindert Scrollen des Hintergrunds
        }

        function closeModal() {
            const modalOverlay = document.getElementById('app-modal-overlay');
            modalOverlay.classList.remove('visible');
            document.body.style.overflow = ''; // Erm√∂glicht Scrollen wieder
        }

        // PWA Banner Logic
        function showPwaBanner() {
            const pwaBanner = document.getElementById('pwa-banner');
            const pwaDismissed = localStorage.getItem('pwaBannerDismissed');

            // Zeigen Sie das Banner nur an, wenn es noch nicht abgelehnt wurde
            // und wenn der Benutzer nicht bereits die PWA installiert hat (was via beforeinstallprompt schwer ist,
            // aber wir k√∂nnen annehmen, dass er es nicht hat, wenn beforeinstallprompt ausgel√∂st wird).
            // F√ºr iOS Safari gibt es kein beforeinstallprompt, daher immer anzeigen, wenn nicht abgelehnt.
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

            if (!pwaDismissed) {
                // F√ºr Android und Desktop (Chrome, Edge etc.)
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault(); // Verhindert das Standard-Banner
                    deferredPrompt = e; // Speichert das Event f√ºr sp√§tere Nutzung
                    pwaBanner.classList.add('show');
                });

                // F√ºr iOS (da beforeinstallprompt dort nicht funktioniert)
                if (isIOS) {
                    pwaBanner.classList.add('show');
                }
            }

            document.getElementById('pwa-banner-button').addEventListener('click', () => {
                pwaBanner.classList.remove('show');
                localStorage.setItem('pwaBannerDismissed', 'true');
            });
        }
    </script>
</body>
</html>
